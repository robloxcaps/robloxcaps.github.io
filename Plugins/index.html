<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" id="www-roblox-com">
<head>
<title>PLUGINS - ROBLOX CLASSIC ASSET PACKS</title>
<link rel="icon" href="../img/FaviIcon.ico" type="image/x-icon"> 
<link rel="stylesheet" href="../style.css">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="author" content="OGMelodii & Jakyro"/>
<meta name="description" content="Contains all plugins made by OGMelodii & Jakyro."/>
<meta name="keywords" content="Roblox, Retro, Roblox Plugin, Sandbox"/>
<meta name="robots" content="all"/>
</head>

<body>

<div id="Container">

    <!-- HEADER SECTION -->
    <div id="Header">
        <div id="Banner">
            <img id="MainBanner" src="../img/2007NoLogoBanner.png" alt="ROBLOX Banner" />
        </div>
        <div id="Navigation">
            <span><a id="ctl00_hlInfo" class="MenuItem" href="/">Info<img src="https://raw.githubusercontent.com/legacy-icons/famfamfam-silk/refs/heads/master/dist/png/information.png"></a></span>
            <span class="Separator">&nbsp;|&nbsp;</span>
            <span><a id="ctl00_hlPacks" class="MenuItem" href="/Packs/">Packs<img src="https://raw.githubusercontent.com/legacy-icons/famfamfam-silk/refs/heads/master/src/package.png"></a></span>
            <span class="Separator">&nbsp;|&nbsp;</span>
            <span><a id="ctl00_hlCredits" class="MenuItem" href="/Credits/">Credits<img src="https://raw.githubusercontent.com/legacy-icons/famfamfam-silk/refs/heads/master/src/user.png"></a></span>
            <span class="Separator">&nbsp;|&nbsp;</span>
            <span><a id="ctl00_hlSubmit" class="MenuItem" href="/Submit/">Submit Packs<img src="https://raw.githubusercontent.com/legacy-icons/famfamfam-silk/refs/heads/master/src/package_add.png"></a></span>
            <span class="Separator">&nbsp;|&nbsp;</span>
            <span><a id="ctl00_hlNews" class="MenuItem" href="/News/">News<img src="https://raw.githubusercontent.com/legacy-icons/famfamfam-silk/refs/heads/master/src/newspaper.png"></a></span>
            <span class="Separator">&nbsp;|&nbsp;</span>
            <span><a id="ctl00_hlPlugins" class="MenuItem Active" href="/Plugins/">Plugins<img src="https://raw.githubusercontent.com/legacy-icons/famfamfam-silk/refs/heads/master/src/plugin.png"></a></span>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <div id="Body">
        <div id="MainContent">

            <div id="LoadingMessage">Loading plugins...</div>

            <div id="ErrorMessage" style="display:none; text-align:center; color:red; padding:20px;">
                Error loading plugins.
                <br><br>
                <button onclick="loadPlugins()" type="button">Retry</button>
            </div>

            <div id="LastUpdated" style="display:none; text-align:center; font-size:12px;">
                Last updated: <span id="UpdateTime"></span>
            </div>

            <div id="PaginationControls" style="display:none; text-align:center; margin-bottom:15px;">
                <button id="prevPage" type="button"><</button>
                <span id="pageInfo"></span>
                <button id="nextPage" type="button">></button>
            </div>

            <div class="PluginGrid" id="PluginGrid" style="display:none;"></div>

        </div>
    </div>

    <!-- FOOTER -->
    <div id="Footer">
        <hr/>
        <p class="Legalese">©2026 OGMelodii & Jakyro. All rights reserved.</p>
    </div>

</div>

<!-- Description Modal -->
<div id="DescriptionModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="modalTitle">Plugin Description</h2>
            <span class="close">&times;</span>
        </div>
        <div class="modal-body">
            <p id="modalDescription"></p>
        </div>
    </div>
</div>

<script>
// ============================================
// CONFIGURATION
// ============================================

// Replace this with your actual GitHub gist URL for plugins
const GIST_URL = 'https://gist.githubusercontent.com/OGMelodii/51a64abbd766d1dd4791368bd3d3adc7/raw';
const CACHE_DURATION = 5 * 60 * 1000;
const PLUGINS_PER_PAGE = 6; // 2 columns × 3 rows

let currentPage = 1;
let allPlugins = [];

// ============================================
// LOAD
// ============================================

document.addEventListener('DOMContentLoaded', function () {
    loadPlugins();

    document.getElementById('prevPage').addEventListener('click', () => changePage(-1));
    document.getElementById('nextPage').addEventListener('click', () => changePage(1));
    
    // Modal close button
    const modal = document.getElementById('DescriptionModal');
    const closeBtn = document.querySelector('.close');
    
    closeBtn.onclick = function() {
        modal.style.display = 'none';
    }
    
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = 'none';
        }
    }
});

function loadPlugins() {
    const loading = document.getElementById('LoadingMessage');
    const error = document.getElementById('ErrorMessage');
    const cached = getCachedData();

    loading.style.display = 'block';
    error.style.display = 'none';

    if (cached && !isCacheExpired(cached.timestamp)) {
        allPlugins = cached.plugins;
        currentPage = 1;
        displayPlugins();
        return;
    }

    fetch(GIST_URL + '?t=' + Date.now())
        .then(res => {
            if (!res.ok) throw new Error('Fetch failed');
            return res.json();
        })
        .then(data => {
            allPlugins = data.plugins;
            cacheData(allPlugins);
            currentPage = 1;
            displayPlugins();
        })
        .catch(() => {
            loading.style.display = 'none';
            error.style.display = 'block';
        });
}

// ============================================
// DISPLAY PLUGINS
// ============================================

function displayPlugins() {
    const grid = document.getElementById('PluginGrid');
    const loading = document.getElementById('LoadingMessage');
    const updated = document.getElementById('LastUpdated');
    const time = document.getElementById('UpdateTime');
    const pagination = document.getElementById('PaginationControls');
    const pageInfo = document.getElementById('pageInfo');

    loading.style.display = 'none';
    grid.style.display = 'grid';
    grid.innerHTML = '';

    const start = (currentPage - 1) * PLUGINS_PER_PAGE;
    const end = start + PLUGINS_PER_PAGE;
    const pagePlugins = allPlugins.slice(start, end);

    pagePlugins.forEach(plugin => {
        grid.appendChild(createPluginItem(plugin));
    });

    time.textContent = new Date().toLocaleString();
    updated.style.display = 'block';

    // Update pagination
    pagination.style.display = allPlugins.length > PLUGINS_PER_PAGE ? 'block' : 'none';
    pageInfo.textContent = `Page ${currentPage} of ${Math.ceil(allPlugins.length / PLUGINS_PER_PAGE)}`;

    document.getElementById('prevPage').disabled = currentPage === 1;
    document.getElementById('nextPage').disabled = currentPage === Math.ceil(allPlugins.length / PLUGINS_PER_PAGE);
}

function changePage(delta) {
    const totalPages = Math.ceil(allPlugins.length / PLUGINS_PER_PAGE);
    currentPage = Math.min(Math.max(1, currentPage + delta), totalPages);
    displayPlugins();
}

// ============================================
// CREATE PLUGIN ITEM
// ============================================

function createPluginItem(plugin) {
    const div = document.createElement('div');
    div.className = 'PluginItem';

    let iconPath = plugin.icon || '../img/Placeholder.png';
    let profileUrl = plugin.profileUrl && plugin.profileUrl.trim() !== ''
        ? plugin.profileUrl
        : null;
    
    let description = plugin.description || 'No description available.';

    div.innerHTML = `
        <img class="PluginIcon"
             src="${iconPath}"
             alt="${escapeHtml(plugin.title)} Icon"
             loading="lazy">

        <div class="PluginTitle">${escapeHtml(plugin.title)}</div>
        <div class="PluginAuthor">By: ${escapeHtml(plugin.author)}</div>

        <div class="PluginCategory" style="font-size:12px; color:#666;">
            Category: ${escapeHtml(plugin.category || 'Other')}
        </div>

        <div class="PluginVersion" style="font-size:12px; color:#666;">
            Version: ${escapeHtml(plugin.version || 'N/A')}
        </div>

        <div class="PluginButtons" style="display:flex; gap:3px; margin-top:8px;">

            <a href="${plugin.downloadUrl}"
               class="PluginDownload"
               target="_blank"
               download
               style="flex:1; text-align:center;">
                <img src="https://raw.githubusercontent.com/legacy-icons/famfamfam-silk/refs/heads/master/src/arrow_down.png">
                Download
            </a>

            <button class="PluginSeeMore"
               data-title="${escapeHtml(plugin.title)}"
               data-description="${escapeHtml(description)}"
               style="flex:1; text-align:center; background:var(--accent-color); color:white; border:none; padding:4px 2px; cursor:pointer; font-family:'Comic Sans MS','Comic Sans',cursive; font-size:11px;">
                <img src="https://raw.githubusercontent.com/legacy-icons/famfamfam-silk/refs/heads/master/src/magnifier.png">
                See More
            </button>

            ${profileUrl ? `
            <a href="${profileUrl}"
               class="PluginProfile"
               target="_blank"
               rel="noopener noreferrer"
               style="flex:1; text-align:center; background:var(--primary-color); color:white; border:none; padding:4px 2px; cursor:pointer; text-decoration:none; font-family:'Comic Sans MS','Comic Sans',cursive; font-size:11px;">
                <img src="https://raw.githubusercontent.com/legacy-icons/famfamfam-silk/refs/heads/master/src/user.png">
                See Profile
            </a>
            ` : ``}

        </div>
    `;

    // Add event listener to the See More button
    const seeMoreBtn = div.querySelector('.PluginSeeMore');
    seeMoreBtn.addEventListener('click', function() {
        showDescription(this.dataset.title, this.dataset.description);
    });

    return div;
}

// ============================================
// MODAL FUNCTIONS
// ============================================

function showDescription(title, description) {
    const modal = document.getElementById('DescriptionModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalDescription = document.getElementById('modalDescription');
    
    modalTitle.textContent = title;
    modalDescription.textContent = description;
    modal.style.display = 'block';
}

// ============================================
// UTILITIES
// ============================================

function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}

function cacheData(plugins) {
    localStorage.setItem('pluginsCache', JSON.stringify({
        plugins: plugins,
        timestamp: new Date().toISOString()
    }));
}

function getCachedData() {
    const cached = localStorage.getItem('pluginsCache');
    return cached ? JSON.parse(cached) : null;
}

function isCacheExpired(timestamp) {
    return Date.now() - new Date(timestamp).getTime() > CACHE_DURATION;
}
</script>

</body>
</html>